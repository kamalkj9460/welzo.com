/*
Generated time: April 20, 2023 07:24
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
function generateUUID(){let r=(new Date).getTime(),s="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random();return 0<r?(t=(r+t)%16|0,r=Math.floor(r/16)):(t=(s+t)%16|0,s=Math.floor(s/16)),("x"===e?t:3&t|8).toString(16)})}customElements.get("subscription-form")||customElements.define("subscription-form",class extends HTMLElement{constructor(){super(),this.form=this.querySelector("form"),this.form.querySelector("[name=id]").disabled=!1,this.form.addEventListener("submit",this.onSubmitHandler.bind(this)),this.cartNotification=document.querySelector("cart-notification")}onSubmitHandler(e){e.preventDefault();var e=this.querySelector(".properties_id"),t=generateUUID();e.value=t;const r=this.querySelector('[type="submit"]');if(!r.classList.contains("loading")){this.handleErrorMessage(),this.cartNotification.setActiveElement(document.activeElement),r.setAttribute("aria-disabled",!0),r.classList.add("loading"),this.querySelector(".loading-overlay__spinner").classList.remove("hidden");e=fetchConfig("javascript"),t=(e.headers["content-type"]="application/json",document.querySelectorAll("[name*=properties]"));const s={};t.forEach(e=>{var t=e.name.slice(e.name.indexOf("[")+1,e.name.lastIndexOf("]"));s[t]=e.value});t=document.getElementById("variants_ids").value.split(",");const o=document.getElementById("selling_plan").value,i=[];t.forEach(e=>{e&&i.push({id:e,quantity:1,selling_plan:o,properties:s})});t={items:i};e.body=JSON.stringify(t),e.method="POST",fetch(window.Shopify.routes.root+"cart/add.js",e).then(e=>e.json()).then(e=>{e.status?this.handleErrorMessage(e.description):(window.location.href="/checkout",this.cartNotification.renderContents(e.items[0]))}).catch(e=>{console.error(e)}).finally(()=>{r.classList.remove("loading"),r.removeAttribute("aria-disabled"),this.querySelector(".loading-overlay__spinner").classList.add("hidden")})}}handleErrorMessage(e=!1){this.errorMessageWrapper=this.errorMessageWrapper||this.querySelector(".product-form__error-message-wrapper"),this.errorMessage=this.errorMessage||this.errorMessageWrapper.querySelector(".product-form__error-message"),this.errorMessageWrapper.toggleAttribute("hidden",!e),e&&(this.errorMessage.textContent=e)}});