{% unless template contains "index" or template contains "collection" or template contains "product"  %}
    <style>.how-works__title{font-family:Quicksand;font-style:normal;font-weight:700;font-size:36px;line-height:46px}.how-works.no-heading .title{display:none}.how-works .title-wrapper-with-link{margin-top:0;margin-bottom:7rem}@media screen and (max-width:749px){.how-works .title-wrapper-with-link{margin-bottom:3rem}.how-works .page-width{padding-left:0;padding-right:0}}.how-works-card__image-wrapper--third-width{width:33%}.how-works-card__image-wrapper--half-width{width:50%}.how-works-list__item.center .how-works-card__image-wrapper:not(.how-works-card__image-wrapper--full-width),.how-works-list__item:only-child{margin-left:auto;margin-right:auto}.how-works .button{margin-top:1.5rem}@media screen and (min-width:750px){.how-works .button{margin-top:4rem}}.how-works-list{margin-top:0;margin-bottom:0;padding:0;counter-reset:section-counter}.how-works-list__item:only-child{max-width:72rem}.how-works:not(.background-none) .how-works-card{background:rgb(var(--color-background));height:100%}.how-works.background-primary .how-works-card{background:rgb(var(--color-background)) linear-gradient(rgba(var(--color-foreground),.04),rgba(var(--color-foreground),.04))}.how-works-list h3{line-height:calc(1 + .5 / max(1, var(--font-heading-scale)))}.how-works-list h3,.how-works-list p{margin:0}.how-works-card__title::before{counter-increment:section-counter;content:counter(section-counter) ". "}.how-works-card-spacing{padding-top:2.5rem;margin-left:2.5rem;margin-right:2.5rem}.how-works-card__info>:nth-child(2){margin-top:1rem}.how-works-list__item .media--adapt .how-works-card__image,.how-works-list__item.center .media--adapt{width:auto}.how-works-list__item.center .media--adapt img{left:50%;transform:translateX(-50%)}@media screen and (max-width:749px){.how-works-list{margin:0;width:100%}.how-works-list__item{margin:0 0 var(--grid-mobile-vertical-spacing);padding:0}.how-works-list:not(.slider){padding-left:1.5rem;padding-right:1.5rem}.how-works-list.slider .how-works-list__item{width:calc(100% - 3rem)}}@media screen and (min-width:750px){.how-works-list.grid--4-col-desktop,.how-works-list.slider{padding:0}.grid--4-col-desktop .how-works-list__item,.how-works-list__item{padding-bottom:0}.grid--2-col-tablet .how-works-list__item{margin-top:var(--grid-desktop-vertical-spacing);max-width:50%}.background-none .grid--2-col-tablet .how-works-list__item{margin-top:4rem}.grid--2-col-tablet .how-works-list__item:nth-of-type(-n+2){margin-top:0}}@media screen and (min-width:990px){.grid--2-col-tablet.grid--4-col-desktop .how-works-list__item{max-width:25%}.grid--2-col-tablet.grid--4-col-desktop .how-works-list__item:nth-of-type(-n+4){margin-top:0}}.background-none .how-works-card-spacing{padding:0;margin:0}.how-works-card__info{padding:2.5rem 2.5rem}.how-works-card__title{font-family:Quicksand;font-style:normal;font-weight:700;font-size:24px;line-height:34px}.how-works-card__text,.how-works-card__text p{font-family:Poppins;font-style:normal;font-weight:400;font-size:16px;line-height:26px;text-align:center;letter-spacing:-.3px}.background-none .how-works-card__info{padding-top:0;padding-left:0;padding-right:0}.background-none .slider .how-works-card__info{padding-bottom:0}.background-none .how-works-card__image-wrapper+.how-works-card__info{padding-top:2.5rem}.background-none .slider .how-works-card__info{padding-left:.5rem}.background-none .slider .how-works-card__image-wrapper+.how-works-card__info{padding-left:1.5rem}.background-none .how-works-list:not(.slider) .center .how-works-card__info{padding-left:2.5rem;padding-right:2.5rem}@media screen and (max-width:749px){.background-none .slider .how-works-card__info{padding-bottom:1rem}.how-works.background-none .slider.slider--mobile{margin-bottom:0}}@media screen and (min-width:750px){.background-none .how-works-card__image-wrapper{margin-left:1.5rem;margin-right:1.5rem}.background-none .how-works-list .how-works-card__info,.background-none .how-works-list:not(.slider) .center .how-works-card__info{padding-left:1.5rem;padding-right:1.5rem}}.how-works-card{position:relative;box-sizing:border-box}.how-works-card>.how-works-card__image-wrapper--full-width:not(.how-works-card-spacing){border-top-left-radius:calc(var(--text-boxes-radius) - var(--text-boxes-border-width));border-top-right-radius:calc(var(--text-boxes-radius) - var(--text-boxes-border-width));overflow:hidden}.how-works.background-none .how-works-card{border-radius:0}.how-works-card__info .link{text-decoration:none;font-size:inherit;margin-top:1.5rem}.how-works-card__info .icon-wrap{margin-left:.8rem;white-space:nowrap}slider-component{position:relative;display:block}@media screen and (max-width:989px){.no-js slider-component .slider{padding-bottom:3rem}}.slider__slide{scroll-snap-align:start;flex-shrink:0}@media screen and (max-width:749px){.slider.slider--mobile{position:relative;flex-wrap:inherit;overflow-x:auto;scroll-snap-type:x mandatory;scroll-behavior:smooth;scroll-padding-left:1.5rem;-webkit-overflow-scrolling:touch;margin-bottom:1rem;padding-top:max(.5rem,calc(var(--shadow-vertical-offset) * -1 + var(--shadow-blur-radius)));padding-bottom:max(.5rem,calc(var(--shadow-vertical-offset) + var(--shadow-blur-radius)))}.slider.slider--mobile .slider__slide{margin-bottom:0;padding-bottom:0}}@media screen and (min-width:750px){.slider.slider--tablet-up{position:relative;flex-wrap:inherit;overflow-x:auto;scroll-snap-type:x mandatory;scroll-behavior:smooth;scroll-padding-left:1rem;-webkit-overflow-scrolling:touch}.slider.slider--tablet-up .slider__slide{margin-bottom:0;padding-bottom:0}}@media screen and (max-width:989px){.slider.slider--tablet{position:relative;flex-wrap:inherit;overflow-x:auto;scroll-snap-type:x mandatory;scroll-behavior:smooth;scroll-padding-left:1.5rem;-webkit-overflow-scrolling:touch;margin-bottom:1rem;padding-top:max(.5rem,calc(var(--shadow-vertical-offset) * -1 + var(--shadow-blur-radius)));padding-bottom:max(.5rem,calc(var(--shadow-vertical-offset) + var(--shadow-blur-radius)))}.slider.slider--tablet .slider__slide{margin-bottom:0;padding-bottom:0}}.slider--everywhere{position:relative;flex-wrap:inherit;overflow-x:auto;scroll-snap-type:x mandatory;scroll-behavior:smooth;-webkit-overflow-scrolling:touch;margin-bottom:1rem}@media (prefers-reduced-motion){.slider--everywhere{scroll-behavior:auto}}.slider.slider--everywhere .slider__slide{margin-bottom:0;padding-bottom:0;scroll-snap-align:center}.slider{scrollbar-color:rgb(var(--color-foreground)) rgba(var(--color-foreground),0.04);-ms-overflow-style:none;scrollbar-width:none}.slider::-webkit-scrollbar{height:.4rem;width:.4rem;display:none}.no-js .slider{-ms-overflow-style:auto;scrollbar-width:auto}.no-js .slider::-webkit-scrollbar{display:initial}.slider::-webkit-scrollbar-thumb{background-color:rgb(var(--color-foreground));border-radius:.4rem;border:0}.slider::-webkit-scrollbar-track{background:rgba(var(--color-foreground),.04);border-radius:.4rem}.slider-counter{margin:0 1.2rem;display:flex;min-width:2rem}@media screen and (max-width:749px){.slider-counter--dots,.slider-counter--numbers{margin:0}}.slider-counter__link{padding:1rem}@media screen and (max-width:749px){.slider-counter__link{padding:.7rem}}.slider-counter__link--dots .dot{width:1rem;height:1rem;border-radius:50%;border:.1rem solid rgba(var(--color-foreground),.5);padding:0;display:block}.slider-counter__link--active.slider-counter__link--dots .dot{background-color:rgb(var(--color-foreground))}@media screen and (forced-colors:active){.slider-counter__link--active.slider-counter__link--dots .dot{background-color:CanvasText}}.slider-counter__link--dots:not(.slider-counter__link--active):hover .dot{border-color:rgb(var(--color-foreground))}.slider-counter__link--dots .dot,.slider-counter__link--numbers{transition:transform .2s ease-in-out}.slider-counter__link--active.slider-counter__link--numbers,.slider-counter__link--dots:not(.slider-counter__link--active):hover .dot,.slider-counter__link--numbers:hover{transform:scale(1.1)}.slider-counter__link--numbers{color:rgba(var(--color-foreground),.5);text-decoration:none}.slider-counter__link--numbers:hover{color:rgb(var(--color-foreground))}.slider-counter__link--active.slider-counter__link--numbers{text-decoration:underline;color:rgb(var(--color-foreground))}.slider-buttons{display:flex;align-items:center;justify-content:center}@media screen and (min-width:990px){.slider:not(.slider--everywhere)+.slider-buttons{display:none}}@media screen and (min-width:750px){.slider--mobile+.slider-buttons{display:none}}.slider-button{color:rgba(var(--color-foreground),.75);background:0 0;border:none;cursor:pointer;width:44px;height:44px;display:flex;align-items:center;justify-content:center}.slider-button:not([disabled]):hover{color:rgb(var(--color-foreground))}.slider-button .icon{height:.6rem}.slider-button[disabled] .icon{color:rgba(var(--color-foreground),.3);cursor:not-allowed}.slider-button--next .icon{transform:rotate(-90deg)}.slider-button--prev .icon{transform:rotate(90deg)}.slider-button--next:not([disabled]):hover .icon{transform:rotate(-90deg) scale(1.1)}.slider-button--prev:not([disabled]):hover .icon{transform:rotate(90deg) scale(1.1)}</style>
{% endunless %} 
<link rel="stylesheet" data-href="{{ 'section-how-it-works.aio.min.css' | asset_url }}">
<link rel="stylesheet" data-href="{{ 'component-slider.aio.min.css' | asset_url }}">
<noscript>{{ 'component-slider.css' | asset_url | stylesheet_tag }}</noscript>

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

<div class="how-works color-{{ section.settings.color_scheme }} gradient{% unless section.settings.background_style == 'none' and settings.text_boxes_border_thickness > 0 or settings.text_boxes_shadow_opacity > 0 %} background-{{ section.settings.background_style }}{% endunless %}{% if section.settings.title == blank %} no-heading{% endif %}">
  <div class="page-width section-{{ section.id }}-padding isolate">
    {% unless section.settings.title == blank %}
      <div class="title-wrapper-with-link title-wrapper--self-padded-mobile title-wrapper--no-top-margin{% if section.settings.title == blank %} title-wrapper-with-link--no-heading{% endif %}">
        <h2 class="main-title title">
          {{ section.settings.title | escape }}
        </h2>
        {%- if section.settings.button_label != blank and section.settings.swipe_on_mobile -%}
          <a href="{{ section.settings.button_link }}" class="link underlined-link large-up-hide">{{ section.settings.button_label | escape }}</a>
        {%- endif -%}
      </div>
    {% endunless %}
    <slider-component class="slider-mobile-gutter">
      <ul class="how-works-list grid grid--1-col{% if section.blocks.size > 3 and section.settings.image_width != 'full' %} grid--2-col-tablet grid--4-col-desktop{% elsif section.blocks.size > 3 and section.settings.image_width == 'full' %} grid--2-col-tablet{% else %} grid--3-col-tablet{% endif %}{% if section.settings.swipe_on_mobile and section.blocks.size > 1 %} slider slider--mobile grid--peek{% endif %}"
        id="Slider-{{ section.id }}"
        role="list"
      >
        {%- liquid
          assign highest_ratio = 0
          for block in section.blocks
            if block.settings.image.aspect_ratio > highest_ratio
              assign highest_ratio = block.settings.image.aspect_ratio
            endif
          endfor
        -%}
        {% assign googleFaqMarkup = '' %}
        {%- for block in section.blocks -%}
          <li id="Slide-{{ section.id }}-{{ forloop.index }}" class="how-works-list__item grid__item{% if section.settings.swipe_on_mobile %} slider__slide{% endif %}{% if section.settings.column_alignment == 'center' %} center{% endif %}" {{ block.shopify_attributes }}>
            <div class="how-works-card content-container">
              {%- if block.settings.image != blank -%}
                {% if section.settings.image_ratio == 'adapt' or section.settings.image_ratio == 'circle' %}
                  {% assign spaced_image = true %}
                {% endif %}
                <div class="how-works-card__image-wrapper how-works-card__image-wrapper--{{ section.settings.image_width }}-width{% if section.settings.image_width != 'full' or spaced_image %} how-works-card-spacing{% endif %}">
                  <div class="media media--transparent media--{{ section.settings.image_ratio }}"
                    {% if section.settings.image_ratio == 'adapt' %}
                      style="padding-bottom: {{ 1 | divided_by: highest_ratio | times: 100 }}%;"
                    {% endif %}>
                    <img loading="lazy"
                      class="how-works-card__image"
                      srcset="{%- if block.settings.image.width >= 275 -%}{{ block.settings.image | img_url: '275x' }} 275w,{%- endif -%}
                        {%- if block.settings.image.width >= 550 -%}{{ block.settings.image | img_url: '550x' }} 550w,{%- endif -%}
                        {%- if block.settings.image.width >= 710 -%}{{ block.settings.image | img_url: '710x' }} 710w,{%- endif -%}
                        {%- if block.settings.image.width >= 1420 -%}{{ block.settings.image | img_url: '1420x' }} 1420w,{%- endif -%}
                        {{ block.settings.image | img_url: 'master' }} {{ block.settings.image.width }}w"
                      src="{{ block.settings.image | img_url: '550x' }}"
                      sizes="(min-width: 990px) {% if section.blocks.size <= 2 %}710px{% else %}550px{% endif %},
                        (min-width: 750px) {% if section.blocks.size == 1 %}710px{% else %}550px{% endif %},
                        calc(100vw - 30px)"
                      alt="{{ block.settings.image.alt }}"
                      height="{{ block.settings.image.height }}"
                      width="{{ block.settings.image.width }}"
                     
                    >
                  </div>
                </div>
              {%- endif -%}
              <div class="how-works-card__info">
                {%- if block.settings.title != blank -%}
                  <h3 class="how-works-card__title">{{ block.settings.title }}</h3>
                {%- endif -%}
                {%- if block.settings.text != blank -%}
                  <div class="rte how-works-card__text">{{ block.settings.text }}</div>
                {%- endif -%}
                {%- if block.settings.link_label != blank -%}
                  <a class="link animate-arrow" {% if block.settings.link == blank %}role="link" aria-disabled="true"{% else %}href="{{ block.settings.link }}"{% endif %}>{{ block.settings.link_label | escape }}<span class="icon-wrap">&nbsp;{% render 'icon-arrow' %}</span></a>
                {%- endif -%}
              </div>
            </div>
          </li>
          {% capture googleFaqMarkup %}{%- if block.settings.title != blank and block.settings.text != blank -%}{{ googleFaqMarkup }}{% unless forloop.first %},{% endunless %} {
        	    "@type": "Question",
        	    "name": "{{ block.settings.title }}",
        	    "acceptedAnswer": {
        	      "@type": "Answer",
        	      "text": '{{ block.settings.text }}'
        	    }
        	  }
            {%- endif -%}{% endcapture %}
        {%- endfor -%}
      </ul>
  
      {% if template contains 'how-it-works' %}
        <script>
          const objGoogleFaqMarkup = {
            "@context": "http://schema.org/",
            "@type": "FAQPage",
            "mainEntity": [
              {{ googleFaqMarkup }}
            ],
            "url": {{ shop.url | append: page.url | json }}
          };
          const strGoogleFaqMarkup = JSON.stringify(objGoogleFaqMarkup);
          const script = document.createElement('script');
          script.setAttribute('type', 'application/ld+json');
          script.textContent = strGoogleFaqMarkup;
          document.head.appendChild(script);
        </script>
      {% endif %}
      
      {%- if section.settings.swipe_on_mobile -%}
        <div class="slider-buttons no-js-hidden medium-hide{% if section.blocks.size < 2 %} small-hide{% endif %}">
          <button type="button" class="slider-button slider-button--prev" name="previous" aria-label="{{ 'general.slider.previous_slide' | t }}">{% render 'icon-caret' %}</button>
          <div class="slider-counter caption">
            <span class="slider-counter--current">1</span>
            <span aria-hidden="true"> / </span>
            <span class="visually-hidden">{{ 'general.slider.of' | t }}</span>
            <span class="slider-counter--total">{{ section.blocks.size }}</span>
          </div>
          <button type="button" class="slider-button slider-button--next" name="next" aria-label="{{ 'general.slider.next_slide' | t }}">{% render 'icon-caret' %}</button>
        </div>
      {%- endif -%}
    </slider-component>
    <div class="center{% if section.settings.swipe_on_mobile %} small-hide medium-hide{% endif %}">
      {%- if section.settings.button_label != blank -%}
        <a class="button button--primary"{% if section.settings.button_link == blank %} role="link" aria-disabled="true"{% else %} href="{{ section.settings.button_link }}"{% endif %}>
          {{ section.settings.button_label | escape }}
        </a>
      {%- endif-%}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "t:sections.how_it_works.name",
  "class": "section",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "default": "How it works",
      "label": "Title"
    },
    {
      "type": "select",
      "id": "image_width",
      "options": [
        {
          "value": "third",
          "label": "t:sections.how_it_works.settings.image_width.options__1.label"
        },
        {
          "value": "half",
          "label": "t:sections.how_it_works.settings.image_width.options__2.label"
        },
        {
          "value": "full",
          "label": "t:sections.how_it_works.settings.image_width.options__3.label"
        }
      ],
      "default": "full",
      "label": "t:sections.how_it_works.settings.image_width.label"
    },
    {
      "type": "select",
      "id": "image_ratio",
      "options": [
        {
          "value": "adapt",
          "label": "t:sections.how_it_works.settings.image_ratio.options__1.label"
        },
        {
          "value": "portrait",
          "label": "t:sections.how_it_works.settings.image_ratio.options__2.label"
        },
        {
          "value": "square",
          "label": "t:sections.how_it_works.settings.image_ratio.options__3.label"
        },
        {
          "value": "circle",
          "label": "t:sections.how_it_works.settings.image_ratio.options__4.label"
        }
      ],
      "default": "adapt",
      "label": "t:sections.how_it_works.settings.image_ratio.label"
    },
    {
      "type": "select",
      "id": "column_alignment",
      "options": [
        {
          "value": "left",
          "label": "t:sections.how_it_works.settings.column_alignment.options__1.label"
        },
        {
          "value": "center",
          "label": "t:sections.how_it_works.settings.column_alignment.options__2.label"
        }
      ],
      "default": "left",
      "label": "t:sections.how_it_works.settings.column_alignment.label"
    },
    {
      "type": "select",
      "id": "background_style",
      "options": [
        {
          "value": "none",
          "label": "t:sections.how_it_works.settings.background_style.options__1.label"
        },
        {
          "value": "primary",
          "label": "t:sections.how_it_works.settings.background_style.options__2.label"
        }
      ],
      "default": "primary",
      "label": "t:sections.how_it_works.settings.background_style.label"
    },
    {
      "type": "text",
      "id": "button_label",
      "default": "Button label",
      "label": "t:sections.how_it_works.settings.button_label.label"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "t:sections.how_it_works.settings.button_link.label"
    },
    {
      "type": "checkbox",
      "id": "swipe_on_mobile",
      "default": false,
      "label": "t:sections.how_it_works.settings.swipe_on_mobile.label"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "options": [
        {
          "value": "accent-1",
          "label": "t:sections.all.colors.accent_1.label"
        },
        {
          "value": "accent-2",
          "label": "t:sections.all.colors.accent_2.label"
        },
        {
          "value": "background-1",
          "label": "t:sections.all.colors.background_1.label"
        },
        {
          "value": "background-2",
          "label": "t:sections.all.colors.background_2.label"
        },
        {
          "value": "inverse",
          "label": "t:sections.all.colors.inverse.label"
        }
      ],
      "default": "background-1",
      "label": "t:sections.all.colors.label"
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 200,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 200,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 36
    }
  ],
  "blocks": [
    {
      "type": "column",
      "name": "t:sections.how_it_works.blocks.column.name",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "t:sections.how_it_works.blocks.column.settings.image.label"
        },
        {
          "type": "text",
          "id": "title",
          "default": "Pick your home test",
          "label": "t:sections.how_it_works.blocks.column.settings.title.label"
        },
        {
          "type": "richtext",
          "id": "text",
          "default": "<p>We have a wide range of tests to cover your health needs. Order with next day delivery and avoid sitting in a doctor's office or clinic. Use our quiz to find the right test for you.</p>",
          "label": "t:sections.how_it_works.blocks.column.settings.text.label"
        },
        {
          "type": "text",
          "id": "link_label",
          "label": "t:sections.how_it_works.blocks.column.settings.link_label.label"
        },
        {
          "type": "url",
          "id": "link",
          "label": "t:sections.how_it_works.blocks.column.settings.link.label"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.how_it_works.presets.name",
      "blocks": [
        {
          "type": "column"
        }
      ]
    }
  ]
}
{% endschema %}
